# 贡献指南

感谢您考虑为 PWA 展示模式检测器项目做出贡献！本文档将引导您了解贡献过程并提供开发环境设置的说明。

## 目录

- [如何贡献](#如何贡献)
  - [报告问题](#报告问题)
  - [提交改进建议](#提交改进建议)
  - [提交代码](#提交代码)
- [开发设置](#开发设置)
  - [环境要求](#环境要求)
  - [设置本地开发环境](#设置本地开发环境)
  - [项目结构](#项目结构)
- [代码规范](#代码规范)
  - [提交信息规范](#提交信息规范)
  - [代码风格](#代码风格)
- [拉取请求流程](#拉取请求流程)

[English](./CONTRIBUTING.md) | 简体中文

## 如何贡献

### 报告问题

如果您发现了问题或有建议，请在提交新问题前先搜索现有问题，以确保它尚未被报告。

提交问题时，请尽可能提供详细信息：

- 清晰且描述性的标题
- 重现问题的详细步骤
- 预期行为与实际行为
- 相关的截图或动画GIF
- 操作系统和浏览器版本
- 任何可能有助于排查问题的其他信息

### 提交改进建议

如果您有改进建议，请：

1. 创建一个详细描述建议的新问题
2. 标记为"enhancement"
3. 尽量包含可能的实现方法或使用场景

### 提交代码

如果您想直接提交代码，请遵循这些步骤：

1. 将仓库 Fork 到您的 GitHub 账户
2. 将您的 Fork 克隆到本地
3. 创建一个新分支（不要直接在 `main` 上工作）
4. 进行您的更改
5. 提交您的更改并推送到您的 Fork
6. 提交一个 Pull Request

## 开发设置

### 环境要求

- Node.js 18.x 或更高版本
- npm 9.x 或更高版本
- 现代浏览器（Chrome, Firefox, Edge 等）

### 设置本地开发环境

1. 安装依赖：
   ```bash
   npm install
   ```

2. 启动开发服务器：
   ```bash
   npm run dev
   ```

3. 在浏览器中打开 `http://localhost:5000`

### 项目结构

```
pwa-mode-detector/
├── client/              # 前端代码
│   ├── public/          # 静态资源
│   │   ├── icons/       # PWA 图标
│   │   ├── manifests/   # 不同显示模式的 manifest 文件
│   ├── src/             # 源代码
│   │   ├── components/  # React 组件
│   │   ├── hooks/       # 自定义 React Hooks
│   │   ├── lib/         # 工具函数和通用逻辑
│   │   ├── pages/       # 页面组件
├── server/              # 后端代码
│   ├── routes.ts        # API 路由
│   ├── storage.ts       # 数据存储层
├── shared/              # 前后端共享的代码
│   ├── schema.ts        # 数据模型和验证
├── docs/                # 文档
├── CONTRIBUTING.md      # 贡献指南
├── LICENSE              # 许可证
├── README.md            # 项目概述
```

## 代码规范

### 提交信息规范

请遵循约定式提交规范：

```
<type>(<scope>): <description>

[optional body]

[optional footer(s)]
```

类型包括：
- `feat`：新功能
- `fix`：错误修复
- `docs`：文档更改
- `style`：格式更改（不影响代码功能）
- `refactor`：代码重构
- `perf`：性能优化
- `test`：添加或修改测试
- `chore`：构建过程或辅助工具的变动

例如：
```
feat(detection): 添加对 Android 设备的特殊检测逻辑
```

### 代码风格

为了保持代码质量和一致性，请遵循以下规范：

- 确保所有 TypeScript 代码都有适当的类型定义
- 遵循 React 函数组件和 Hooks 的最佳实践
- 确保组件名称使用 PascalCase（例如 `StatusCard.tsx`）
- 确保普通工具函数文件名使用 kebab-case（例如 `query-client.ts`）
- 保持代码简洁，并添加必要的注释来解释复杂逻辑
- 使用 Tailwind CSS 类名保持一致的样式风格
- 避免直接操作 DOM，优先使用 React 的声明式方法

在提交代码之前，请确保你的代码：
- 没有编译错误
- 在不同浏览器中都能正常工作
- 符合项目的整体设计风格

## 拉取请求流程

1. 确保您的 PR 描述清楚地说明了所做的更改和解决的问题
2. 将相关问题链接到您的 PR
3. 确保项目能够正常构建和运行，没有明显的功能缺陷
4. 请求至少一名维护者进行代码审查
5. 解决代码审查中提出的任何问题
6. 一旦获得批准，您的 PR 将被合并

---

再次感谢您为 PWA 展示模式检测器做出贡献！如果您有任何问题，请随时在问题跟踪器中提问或与维护者联系。